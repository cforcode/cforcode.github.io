(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/login.870bca85.png"},213:function(e,t,a){e.exports=a(414)},219:function(e,t,a){},291:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(4),c=a.n(l),i=(a(218),a(219),a(15)),s=a(16),m=a(45),u=a(17),h=a(18),p=a(14),d=a(63),g=a(415),E=a(148),f=a(421),b=a(416),v=a(428),y=g.a.Header,O=E.a.SubMenu,k=f.a.Text,j=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(y,null,o.a.createElement(E.a,{theme:"light",mode:"horizontal",defaultSelectedKeys:["0"]},o.a.createElement(E.a.Item,{key:"0"},o.a.createElement(p.b,{to:"/"},"Home")),!this.props.authenticated&&o.a.createElement(E.a.Item,{style:{float:"right"},key:"3"},o.a.createElement(p.b,{to:"/login"},"Login")),!this.props.authenticated&&o.a.createElement(E.a.Item,{style:{float:"right"},key:"4"},o.a.createElement(p.b,{to:"/signup"},"Signup")),this.props.authenticated&&o.a.createElement(O,{style:{float:"right"},title:o.a.createElement(o.a.Fragment,null,this.props.loggedInUser.imageUrl&&o.a.createElement(b.a,{src:this.props.loggedInUser.imageUrl}),!this.props.loggedInUser.imageUrl&&o.a.createElement(b.a,{icon:o.a.createElement(v.a,null)}),o.a.createElement(k,{level:4},this.props.loggedInUser.name))},o.a.createElement(E.a.Item,{key:"1"},o.a.createElement(p.b,{to:"/admin"},"Admin Dashboard")),o.a.createElement(E.a.Item,{key:"2"},o.a.createElement(p.b,{to:"/profile"},"Profile")),o.a.createElement(E.a.Item,{key:"3"},o.a.createElement("span",{onClick:this.props.onLogout},"Logout")))))}}]),a}(r.Component);a(291);n="cforcode.github.io"===(window&&window.location&&window.location.hostname)?"https://nerchuko.herokuapp.com":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_HOST||"http://localhost:8080";var I="".concat(n),w="".concat(window.location,"/oauth2/redirect"),C="".concat(I,"/oauth2/authorize/google?redirect_uri=")+w,S="".concat(I,"/oauth2/authorize/facebook?redirect_uri=")+w,P="".concat(I,"/oauth2/authorize/github?redirect_uri=")+w,U=a(429),x=a(430),T=a(431),L=a(62),N=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"social-login"},o.a.createElement(L.a,{shape:"round",style:{background:"#dc4e41",color:"#fff"},icon:o.a.createElement(U.a,null),onClick:function(){return window.location.href=C},block:!0},"Google"),o.a.createElement(L.a,{shape:"round",style:{background:"#3b5998",color:"#fff"},icon:o.a.createElement(x.a,null),onClick:function(){return window.location.href=S},block:!0},"Facebook"),o.a.createElement(L.a,{shape:"round",style:{background:"#00405d",color:"#fff"},icon:o.a.createElement(T.a,null),onClick:function(){return window.location.href=P},block:!0},"GitHub"))}}]),a}(r.Component),A=function(e){var t=new Headers({"Content-Type":"application/json"});localStorage.getItem("accessToken")&&t.append("Authorization","Bearer "+localStorage.getItem("accessToken"));var a={headers:t};return e=Object.assign({},a,e),fetch(e.url,e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))}))};var F=a(114),_=a.n(F),z=a(432),M=a(424),D=a(84),B=a(39),H=a(422),R=a(426),q=a(425),K=a(417),W=f.a.Title,J=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={email:"",password:""},n.onFinish=n.onFinish.bind(Object(m.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.location.state&&this.props.location.state.error&&setTimeout((function(){M.a.error(e.props.location.state.error),e.props.history.replace({pathname:e.props.location.pathname,state:{}})}),100)}},{key:"onFinish",value:function(e){var t=this;(function(e){return A({url:I+"/auth/login",method:"POST",body:JSON.stringify(e)})})(Object.assign({},e)).then((function(e){localStorage.setItem("accessToken",e.accessToken),M.a.success("You're successfully logged in!"),t.props.loadCurrentlyLoggedInUser()})).catch((function(e){M.a.error(e&&e.message||"Oops! Something went wrong. Please try again!")}))}},{key:"onFinishFailed",value:function(e){console.log("Failed:",e)}},{key:"render",value:function(){return this.props.authenticated?o.a.createElement(d.a,{to:{pathname:"/",state:{from:this.props.location}}}):o.a.createElement(D.a,{justify:"center"},o.a.createElement(B.a,{xs:0,sm:14},o.a.createElement("img",{src:_.a,width:"100%",alt:"login"})),o.a.createElement(B.a,{xs:20,sm:6},o.a.createElement("div",{className:"login-content"},o.a.createElement(W,{level:2},"Login"),o.a.createElement(H.a,{layout:"vertical",name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish},o.a.createElement(H.a.Item,{label:"Email Address",name:"email",rules:[{required:!0,message:"Please input your email!"}]},o.a.createElement(R.a,{prefix:o.a.createElement(v.a,{className:"site-form-item-icon"}),placeholder:"email"})),o.a.createElement(H.a.Item,{label:"password",name:"password",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(R.a.Password,{prefix:o.a.createElement(z.a,{className:"site-form-item-icon"}),placeholder:"Password"})),o.a.createElement(H.a.Item,null,o.a.createElement(H.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},o.a.createElement(q.a,null,"Remember me")),o.a.createElement("span",{style:{float:"right"}},o.a.createElement(p.b,{className:"login-form-forgot",to:"/forgot"},"Forgot password"))),o.a.createElement(H.a.Item,null,o.a.createElement(L.a,{type:"primary",block:!0,htmlType:"submit",className:"login-form-button"},"Log in")),o.a.createElement(K.a,null,"or"),o.a.createElement(N,null)),o.a.createElement("div",{className:"signup-link"},"Don't have an account? ",o.a.createElement(p.b,{to:"/signup"},"Sign up")))))}}]),a}(r.Component),G=a(197),V=f.a.Title,Y=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return this.props.authenticated?o.a.createElement(d.a,{to:{pathname:"/",state:{from:this.props.location}}}):o.a.createElement(D.a,{justify:"center"},o.a.createElement(B.a,{xs:0,sm:14},o.a.createElement("img",{src:_.a,width:"100%",alt:"login"})),o.a.createElement(B.a,{xs:20,sm:6},o.a.createElement("div",{className:"login-content"},o.a.createElement(V,{level:2},"Signup"),o.a.createElement($,this.props),o.a.createElement("div",{className:"signup-link"},"Already have an account? ",o.a.createElement(p.b,{to:"/login"},"Login")))))}}]),a}(r.Component),$=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={name:"",email:"",password:""},n.handleInputChange=n.handleInputChange.bind(Object(m.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n}return Object(s.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(G.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a,n=Object.assign({},this.state);(a=n,A({url:I+"/auth/signup",method:"POST",body:JSON.stringify(a)})).then((function(e){M.a.success("You're successfully registered. Please login to continue"),t.props.history.push("/login")})).catch((function(e){M.a.error(e&&e.message||"Oops Something went wrong. Please try again")}))}},{key:"onFinish",value:function(e){console.log("Success:",e)}},{key:"onFinishFailed",value:function(e){console.log("Failed:",e)}},{key:"render",value:function(){return o.a.createElement(H.a,{name:"normal_login",layout:"vertical",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish},o.a.createElement(H.a.Item,{label:"Email Address",name:"username",rules:[{required:!0,message:"Please input your Email Address"}]},o.a.createElement(R.a,{prefix:o.a.createElement(v.a,{className:"site-form-item-icon"}),placeholder:"Username"})),o.a.createElement(H.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your Password"}]},o.a.createElement(R.a.Password,{prefix:o.a.createElement(z.a,{className:"site-form-item-icon"}),placeholder:"Password"})),o.a.createElement(H.a.Item,{label:"Confirm Password",name:"confirmPassword",rules:[{required:!0,message:"Please input your confirm Password"}]},o.a.createElement(R.a.Password,{prefix:o.a.createElement(z.a,{className:"site-form-item-icon"}),placeholder:"Confirm Password"})),o.a.createElement(H.a.Item,null,o.a.createElement(H.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},o.a.createElement(q.a,null,"Remember me")),o.a.createElement("span",{style:{float:"right"}},o.a.createElement(p.b,{className:"login-form-forgot",to:"/forgot"},"Forgot password"))),o.a.createElement(H.a.Item,null,o.a.createElement(L.a,{type:"primary",block:!0,htmlType:"submit",className:"login-form-button"},"Sign up")),o.a.createElement(K.a,null,"or"),o.a.createElement(N,null))}}]),a}(r.Component),Q=Y,X=a(419),Z=X.a.Meta,ee=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),console.log(e),n}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(X.a,{hoverable:!0,style:{width:240},cover:o.a.createElement("img",{src:this.props.currentUser.imageUrl,alt:this.props.currentUser.name})},o.a.createElement(Z,{title:this.props.currentUser.name,description:this.props.currentUser.email}))}}]),a}(r.Component),te=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"getUrlParameter",value:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(this.props.location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}},{key:"render",value:function(){var e=this.getUrlParameter("token"),t=this.getUrlParameter("error");return e?(localStorage.setItem("accessToken",e),o.a.createElement(d.a,{to:{pathname:"/profile",state:{from:this.props.location}}})):o.a.createElement(d.a,{to:{pathname:"/login",state:{from:this.props.location,error:t}}})}}]),a}(r.Component),ae=a(81),ne=a.n(ae),re=g.a.Content,oe=X.a.Meta,le=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={cards:[]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}};ne.a.get("".concat(I,"/topics"),t).then((function(t){var a=t.data;e.setState({cards:a})}))}},{key:"render",value:function(){return o.a.createElement(re,{style:{padding:"50px"}},o.a.createElement(D.a,{gutter:[24,24]},this.state.cards.map((function(e,t){return o.a.createElement(B.a,{key:t,className:"gutter-row",xs:12,sm:8,md:4},o.a.createElement(X.a,{hoverable:!0,style:{textAlign:"center"},cover:o.a.createElement(p.b,{to:"/categories/".concat(e.name)},o.a.createElement("img",{alt:e.name,src:e.imageUrl,style:{height:"100px",width:"auto",margin:"24px auto 0"}}))},o.a.createElement(oe,{title:o.a.createElement(p.b,{to:"/categories/".concat(e.name)},e.name),style:{textAlign:"center"}})))}))))}}]),a}(o.a.Component),ce=a(427),ie=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(ce.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:o.a.createElement(p.b,{to:"/",className:"ant-btn ant-btn-primary"},"Home")})}}]),a}(o.a.Component),se=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Category: ",this.props.match.params.name))}}]),a}(o.a.Component),me=g.a.Content,ue=X.a.Meta,he=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={cards:[{name:"Languages",image:"https://image.flaticon.com/icons/svg/484/484531.svg",path:"languages"},{name:"Topics",image:"https://image.flaticon.com/icons/svg/2422/2422223.svg",path:"topics"}]},e}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(me,{style:{padding:"50px"}},o.a.createElement(D.a,{gutter:[24,24]},this.state.cards.map((function(e,t){return o.a.createElement(B.a,{key:t,className:"gutter-row",xs:12,sm:8,md:4},o.a.createElement(X.a,{hoverable:!0,style:{textAlign:"center"},cover:o.a.createElement(p.b,{to:"/admin/".concat(e.path)},o.a.createElement("img",{alt:e.name,src:e.image,style:{height:"100px",width:"auto",margin:"24px auto 0"}}))},o.a.createElement(ue,{title:o.a.createElement(p.b,{to:"/admin/".concat(e.path)},e.name),style:{textAlign:"center"}})))}))))}}]),a}(r.Component),pe=a(423),de=a(418),ge=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={languages:[],fontColorList:["#613400","#254000","#092b00","#002766"],backgroundColorList:["#fffbe6","#f4ffb8","#d9f7be","#bae7ff"]},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}};ne.a.get("http://localhost:8080/languages",t).then((function(t){var a=t.data;e.setState({languages:a})}))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justify:"center"},o.a.createElement(B.a,{span:20},o.a.createElement(pe.a,null,o.a.createElement(pe.a.Item,null,"Home"),o.a.createElement(pe.a.Item,null,o.a.createElement(p.b,{to:"/admin"},"Admin")),o.a.createElement(pe.a.Item,null,"Languages"))),o.a.createElement(B.a,{span:20},o.a.createElement(X.a,{size:"small",title:"Languages",extra:o.a.createElement("a",{href:"#"},"Add")},o.a.createElement(de.a,{size:"small",itemLayout:"horizontal",dataSource:this.state.languages,renderItem:function(t,a){return o.a.createElement(de.a.Item,null,o.a.createElement(de.a.Item.Meta,{avatar:o.a.createElement(b.a,{style:{color:e.state.fontColorList[a],backgroundColor:e.state.backgroundColorList[a]}},t.code),title:o.a.createElement("a",{href:"https://ant.design"},t.name),description:t.nativeName}))}})))))}}]),a}(o.a.Component),Ee=a(420),fe=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).showModal=function(){e.setState({visible:!0})},e.handleOk=function(t){console.log(t),e.setState({visible:!1})},e.handleCancel=function(t){console.log(t),e.setState({visible:!1})},e.state={topics:[],visible:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={headers:{Authorization:"Bearer ".concat(localStorage.getItem("accessToken"))}};ne.a.get("http://localhost:8080/topics",t).then((function(t){var a=t.data;e.setState({topics:a})}))}},{key:"render",value:function(){var e=this.state.topics;return o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,{justify:"center"},o.a.createElement(B.a,{span:20},o.a.createElement(pe.a,null,o.a.createElement(pe.a.Item,null,"Home"),o.a.createElement(pe.a.Item,null,o.a.createElement(p.b,{to:"/admin"},"Admin")),o.a.createElement(pe.a.Item,null,"Topics"))),o.a.createElement(B.a,{span:20},o.a.createElement(X.a,{size:"small",title:"Topics List",extra:o.a.createElement(L.a,{type:"primary",size:"small",onClick:this.showModal},"Add")},o.a.createElement(de.a,{size:"small",itemLayout:"horizontal",dataSource:e,renderItem:function(e,t){return o.a.createElement(de.a.Item,null,o.a.createElement(de.a.Item.Meta,{avatar:o.a.createElement(b.a,{shape:"square",src:e.imageUrl}),title:e.name}))}}),"    "))),o.a.createElement(Ee.a,{title:"Basic Modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement("div",null,o.a.createElement(H.a,{layout:"vertical"},o.a.createElement(H.a.Item,{label:"Field A"},o.a.createElement(R.a,{placeholder:"input placeholder"})),o.a.createElement(H.a.Item,{label:"Field B"},o.a.createElement(R.a,{placeholder:"input placeholder"})),o.a.createElement(H.a.Item,null,o.a.createElement(L.a,{type:"primary"},"Submit"))))))}}]),a}(r.Component);function be(e){return o.a.createElement("div",{className:"loading-indicator",style:{display:"block",textAlign:"center",marginTop:"30px"}},"Loading ...")}var ve=a(212),ye=function(e){var t=e.component,a=e.authenticated,n=Object(ve.a)(e,["component","authenticated"]);return o.a.createElement(d.b,Object.assign({},n,{render:function(e){return a?o.a.createElement(t,Object.assign({},n,e)):o.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Oe=g.a.Content,ke=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={authenticated:!1,currentUser:null,loading:!1},n.loadCurrentlyLoggedInUser=n.loadCurrentlyLoggedInUser.bind(Object(m.a)(n)),n.handleLogout=n.handleLogout.bind(Object(m.a)(n)),n}return Object(s.a)(a,[{key:"loadCurrentlyLoggedInUser",value:function(){var e=this;this.setState({loading:!0}),(localStorage.getItem("accessToken")?A({url:I+"/user/me",method:"GET"}):Promise.reject("No access token set.")).then((function(t){e.setState({currentUser:t,authenticated:!0,loading:!1})})).catch((function(t){e.setState({loading:!1})}))}},{key:"handleLogout",value:function(){localStorage.removeItem("accessToken"),this.setState({authenticated:!1,currentUser:null}),M.a.success("You have been successfully logged out")}},{key:"componentDidMount",value:function(){this.loadCurrentlyLoggedInUser()}},{key:"render",value:function(){var e=this;return this.state.loading?o.a.createElement(be,null):o.a.createElement(p.a,{basename:""},o.a.createElement(g.a,{className:"layout"},o.a.createElement(j,{authenticated:this.state.authenticated,loggedInUser:this.state.currentUser,onLogout:this.handleLogout}),o.a.createElement(Oe,null,o.a.createElement(d.d,null,o.a.createElement(d.b,{exact:!0,path:"/",component:le}),o.a.createElement(ye,{path:"/profile",authenticated:this.state.authenticated,currentUser:this.state.currentUser,component:ee}),o.a.createElement(d.b,{path:"/login",render:function(t){return o.a.createElement(J,Object.assign({authenticated:e.state.authenticated},t,{loadCurrentlyLoggedInUser:e.loadCurrentlyLoggedInUser}))}}),o.a.createElement(d.b,{path:"/signup",render:function(t){return o.a.createElement(Q,Object.assign({authenticated:e.state.authenticated},t))}}),o.a.createElement(d.b,{path:"/oauth2/redirect",component:te}),o.a.createElement(d.b,{path:"/home",component:le}),o.a.createElement(d.b,{path:"/admin/languages",component:ge}),o.a.createElement(d.b,{path:"/admin/topics",component:fe}),o.a.createElement(d.b,{path:"/admin",component:he}),o.a.createElement(d.b,{path:"/categories/:name",component:se}),o.a.createElement(d.b,{path:"*",component:ie})))))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[213,1,2]]]);
//# sourceMappingURL=main.74a7163d.chunk.js.map